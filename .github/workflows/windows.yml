name: Build Python Application for Windows

on: push

#permissions:
#  contents: read

#env:
#  UV_SYSTEM_PYTHON: 1

jobs:
  build:
    runs-on: windows-2022

    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Install uv
        uses: astral-sh/setup-uv@v7
        with:
          version: "0.9.26"
      - name: Set up Python
        #run: uv python install
        uses: actions/setup-python@v4
        with:
          python-version: "3.13"
      - name: Build application
        run: |
             uv venv .venv
             uv pip install -r requirements.txt
             uvx pyinstaller --onefile --nowindow --clean --icon=feuerwehrhelm.ico --paths ./.venv/lib64/python3.13/site-packages/ --name "Feuerwehr-Anmelder" --hidden-import="PIL._tkinter_finder" --collect-data "selenium" --add-data="feuerwehrhelm.png:." main.py
      - name: Store build-files
        uses: actions/upload-artifact@v4
        with:
          name: Exe-Build
          path: dist
